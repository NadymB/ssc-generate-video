(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6324],{42101:function(e,t,a){Promise.resolve().then(a.bind(a,27193))},11990:function(e,t,a){"use strict";a.d(t,{B:function(){return fetchGroupListApi}});let n="api/v1/groups";var i=a(96657);let r=new i.Z({url:"https://mhtai.kenroly.com"});r.createEntities([{name:n}]);let fetchGroupListApi=()=>r.createBasicCRUDEndpoints({name:n}).get()},75551:function(e,t,a){"use strict";a.d(t,{t:function(){return createTeamApi},C:function(){return fetchListTeamApi}});let n="api/v1/teams";var i=a(96657);let r=new i.Z({url:"https://mhtai.kenroly.com"});r.createEntities([{name:n}]);let fetchListTeamApi=()=>r.createBasicCRUDEndpoints({name:n}).get(),createTeamApi=e=>r.createBasicCRUDEndpoints({name:"api/v1/teams"}).post(e)},77032:function(e,t,a){"use strict";a.d(t,{F8:function(){return createNewUserApi},L2:function(){return fetchListUserApi}});let n="api/v1/users";var i=a(96657);let r=new i.Z({url:"https://mhtai.kenroly.com"});r.createEntities([{name:n},{name:"api/v1/groups"}]);let fetchListUserApi=e=>r.createBasicCRUDEndpoints({name:n}).get(e),createNewUserApi=e=>r.createBasicCRUDEndpoints({name:"api/v1/users"}).post(e)},27193:function(e,t,a){"use strict";a.r(t);var n=a(57437),i=a(2265),r=a(84909),s=a(6567),l=a(86449);t.default=(0,l.Z)(()=>((0,i.useEffect)(()=>{document.title="Music Generation | MHT MUSIC AI"},[]),(0,n.jsx)(s.default,{leftMenu:!0,children:(0,n.jsx)(r.Z,{})})))},84909:function(e,t,a){"use strict";a.d(t,{Z:function(){return UserManagementTest}});var n=a(60230),i=a(57437),r=a(2265),s=a(20020),l=a(18142),o=a(68939),d=a(88500),u=a(65473),c=a(88110),m=a.n(c),p=a(9273),h=a(71727),f=a(11990),v=a(75551),g=a(77032),x=a(92237),b=a(97212),j=a(53648),y=a(59611),C=a(14472),w=a(44511),E=a(79404),U=a(5925);function _templateObject(){let e=(0,n._)(["\n    &.","-btn-primary:not([disabled]):not(\n        .",'-btn-dangerous\n      ) {\n      border-width: 0;\n\n      > span {\n        position: relative;\n      }\n\n      &::before {\n        content: "";\n        background: linear-gradient(135deg, #6253e1, #04befe);\n        position: absolute;\n        inset: 0;\n        opacity: 1;\n        transition: all 0.3s;\n        border-radius: inherit;\n      }\n\n      &:hover::before {\n        opacity: 0;\n      }\n    }\n  ']);return _templateObject=function(){return e},e}a(83343);let _=[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,i.jsx)("a",{children:e})},{title:"Username",dataIndex:"username",key:"username",render:e=>(0,i.jsx)("span",{children:e})},{title:"Email",dataIndex:"email",key:"email",render:e=>(0,i.jsx)("span",{children:e})},{title:"Group",dataIndex:"group",key:"group",render:(e,t)=>{let{group:a}=t;return(0,i.jsx)(d.Z,{color:"ADMIN"===a?"geekblue":"SUPERVISOR"===a?"green":"volcano",children:a.toUpperCase()},a)}},{title:"Teams",dataIndex:"teams",key:"teams",render:e=>(0,i.jsx)("span",{children:null==e?void 0:e.map(e=>e.name).join(", ")})}];function UserManagementTest(){var e;let[t,a]=(0,r.useState)([]),[n,d]=(0,r.useState)([]),[c,N]=(0,r.useState)([]),[Z,A]=(0,r.useState)({page:1,pageSize:10,meta:null}),[S,k]=(0,r.useState)(!1),L=(0,r.useRef)();(0,r.useRef)();let[T]=E.Z.useForm(),fetchUserList=async(e,t)=>{try{var n,i,r,s;let l=await (0,h.eg)({page:e,limit:t}),o=null==l?void 0:null===(i=l.data)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.meta;A(e=>({...e,meta:o})),a(null==l?void 0:null===(s=l.data)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.items)}catch(e){console.error("fetch user list failed:",e)}},fetchGroupList=async(e,t)=>{try{var a;let n=await (0,f.B)({page:e,limit:t});d(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.data)}catch(e){console.error("fetch group list failed:",e)}},fetchTeamList=async(e,t)=>{try{var a,n;let i=await (0,v.C)({page:e,limit:t});N(null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.items)}catch(e){console.error("fetch team list failed:",e)}},handleCreateUser=async e=>{var t,a,n,i,r;try{let a=await (0,g.F8)(e);(null==a?void 0:a.status)===200&&(U.Am.success("Create a new user successfully!"),fetchUserList(1,Z.pageSize),null===(t=L.current)||void 0===t||t.resetFields(),k(!1))}catch(e){console.error("An error occurred:",null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message),U.Am.error(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(i=r.data)||void 0===i?void 0:i.message)}};(0,r.useEffect)(()=>{fetchUserList(Z.page,Z.pageSize)},[Z.page]),(0,r.useEffect)(()=>{fetchGroupList(1,100),fetchTeamList(1,100)},[]);let{getPrefixCls:R}=(0,r.useContext)(p.default.ConfigContext),I=R();return(0,b.iv)(_templateObject(),I,I),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"techwave_fn_community_page",children:[(0,i.jsx)("div",{className:"fn__title_holder",children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsx)("h1",{className:"title",children:"User Management"})})}),(0,i.jsx)("div",{className:"techwave_fn_feed",children:(0,i.jsxs)("div",{className:"container-fluid",children:[(0,i.jsx)("div",{className:"w-100 d-flex justify-content-end",children:(0,i.jsx)(m(),{type:"primary",size:"large",icon:(0,i.jsx)(x.Z,{}),className:"d-flex align-items-center bg-success",onClick:()=>{k(!0)},children:"Create a new user"})}),(0,i.jsx)(o.Z,{columns:_,dataSource:t,pagination:!1,className:"mt-2"}),";",(0,i.jsx)(s.Z,{children:(0,i.jsx)(l.Z,{xs:24,children:(0,i.jsx)("div",{className:"user-card-pagination text-end mt-5",children:(0,i.jsx)(u.default,{align:"end",total:null==Z?void 0:null===(e=Z.meta)||void 0===e?void 0:e.total,onChange:e=>{A(t=>({...t,page:e}))},current:Z.page,pageSize:Z.pageSize})})})})]})})]}),(0,i.jsxs)(j.Y,{title:"Create a new user",open:S,onFinish:handleCreateUser,onOpenChange:k,submitter:{searchConfig:{submitText:"Submit",resetText:"Close"}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},formRef:L,children:[(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(C.Z,{width:"md",name:"username",label:"Username",tooltip:"Enter a username",placeholder:"Enter username",rules:[{required:!0}]}),(0,i.jsx)(C.Z,{type:"email",width:"md",name:"email",label:"Email",tooltip:"Enter a email",placeholder:"Enter a email",rules:[{required:!0},{type:"email"}]})]}),(0,i.jsxs)(y.A.Group,{children:[(0,i.jsx)(C.Z,{width:"sm",name:"name",label:"Name",tooltip:"Enter a name",placeholder:"Enter a name",rules:[{required:!0}]}),(0,i.jsx)(w.Z,{options:n.map(e=>({value:e.id,label:e.name})),width:"sm",placeholder:"...",name:"group_id",label:"Choose a group",rules:[{required:!0}]}),(0,i.jsx)(w.Z,{width:"sm",placeholder:"...",options:c.map(e=>({value:e.id,label:e.name})),fieldProps:{mode:"multiple"},name:"team_ids",label:"Choose teams",rules:[{required:!0}]})]})]})]})}},86449:function(e,t,a){"use strict";var n=a(57437);a(39272);var i=a(24033),r=a(2265);t.Z=e=>t=>{let[a,s]=(0,r.useState)(null),l=(0,i.useRouter)();return(0,r.useEffect)(()=>{let e=localStorage.getItem("authToken");s(e),e||l.push("/sign-in")},[a,l]),a?(0,n.jsx)(e,{...t}):null}}},function(e){e.O(0,[5713,8326,2600,1360,7394,59,8519,8092,9404,9260,9272,6567,2971,2472,1744],function(){return e(e.s=42101)}),_N_E=e.O()}]);