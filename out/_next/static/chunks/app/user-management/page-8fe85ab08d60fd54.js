(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6324],{59987:function(e,t,a){Promise.resolve().then(a.bind(a,27193))},11990:function(e,t,a){"use strict";a.d(t,{B:function(){return fetchGroupListApi}});let n="api/v1/groups";var i=a(96657);let s=new i.Z({url:"https://mhtai.kenroly.com"});s.createEntities([{name:n}]);let fetchGroupListApi=()=>s.createBasicCRUDEndpoints({name:n}).get()},75551:function(e,t,a){"use strict";a.d(t,{tH:function(){return createTeamApi},MM:function(){return deleteTeamApi},Cl:function(){return fetchDetailTeamApi},CB:function(){return fetchListTeamApi},eQ:function(){return updateTeamApi}});let n="api/v1/teams";var i=a(96657);let s=new i.Z({url:"https://mhtai.kenroly.com"});s.createEntities([{name:n}]);let fetchListTeamApi=e=>s.createBasicCRUDEndpoints({name:n}).get(e),createTeamApi=e=>s.createBasicCRUDEndpoints({name:"api/v1/teams"}).post(e),updateTeamApi=e=>s.createBasicCRUDEndpoints({name:"api/v1/teams"}).put(e),fetchDetailTeamApi=e=>s.createBasicCRUDEndpoints({name:"api/v1/teams"}).getOne(e),deleteTeamApi=e=>s.createBasicCRUDEndpoints({name:"api/v1/teams"}).delete(e)},77032:function(e,t,a){"use strict";a.d(t,{F8:function(){return createNewUserApi},L2:function(){return fetchListUserApi}});let n="api/v1/users";var i=a(96657);let s=new i.Z({url:"https://mhtai.kenroly.com"});s.createEntities([{name:n},{name:"api/v1/groups"}]);let fetchListUserApi=e=>s.createBasicCRUDEndpoints({name:n}).get(e),createNewUserApi=e=>s.createBasicCRUDEndpoints({name:"api/v1/users"}).post(e)},27193:function(e,t,a){"use strict";a.r(t);var n=a(57437),i=a(2265),s=a(84909),r=a(6567),l=a(86449);t.default=(0,l.Z)(()=>((0,i.useEffect)(()=>{document.title="Music Generation | MHT MUSIC AI"},[]),(0,n.jsx)(r.default,{leftMenu:!0,children:(0,n.jsx)(s.Z,{})})))},84909:function(e,t,a){"use strict";a.d(t,{Z:function(){return UserManagementTest}});var n=a(60230),i=a(57437),s=a(2265),r=a(20020),l=a(18142),o=a(68939),d=a(88500),u=a(65473),c=a(88110),m=a.n(c),p=a(9273),h=a(71727),f=a(11990),v=a(75551),g=a(77032),x=a(92237),b=a(97212),j=a(53648),C=a(59611),y=a(14472),E=a(44511),U=a(79404),w=a(5925);function _templateObject(){let e=(0,n._)(["\n    &.","-btn-primary:not([disabled]):not(\n        .",'-btn-dangerous\n      ) {\n      border-width: 0;\n\n      > span {\n        position: relative;\n      }\n\n      &::before {\n        content: "";\n        background: linear-gradient(135deg, #6253e1, #04befe);\n        position: absolute;\n        inset: 0;\n        opacity: 1;\n        transition: all 0.3s;\n        border-radius: inherit;\n      }\n\n      &:hover::before {\n        opacity: 0;\n      }\n    }\n  ']);return _templateObject=function(){return e},e}a(83343);let A=[{title:"Name",dataIndex:"name",key:"name",render:e=>(0,i.jsx)("a",{children:e})},{title:"Username",dataIndex:"username",key:"username",render:e=>(0,i.jsx)("span",{children:e})},{title:"Email",dataIndex:"email",key:"email",render:e=>(0,i.jsx)("span",{children:e})},{title:"Group",dataIndex:"group",key:"group",render:(e,t)=>{let{group:a}=t;return(0,i.jsx)(d.Z,{color:"ADMIN"===a?"geekblue":"SUPERVISOR"===a?"green":"volcano",children:a.toUpperCase()},a)}},{title:"Teams",dataIndex:"teams",key:"teams",render:e=>(0,i.jsx)("span",{children:null==e?void 0:e.map(e=>e.name).join(", ")})}];function UserManagementTest(){var e;let[t,a]=(0,s.useState)([]),[n,d]=(0,s.useState)([]),[c,_]=(0,s.useState)([]),[N,T]=(0,s.useState)({page:1,pageSize:10,meta:null}),[Z,k]=(0,s.useState)(!1),S=(0,s.useRef)();(0,s.useRef)();let[L]=U.Z.useForm(),fetchUserList=async(e,t)=>{try{var n,i,s,r;let l=await (0,h.eg)({page:e,limit:t}),o=null==l?void 0:null===(i=l.data)||void 0===i?void 0:null===(n=i.data)||void 0===n?void 0:n.meta;T(e=>({...e,meta:o})),a(null==l?void 0:null===(r=l.data)||void 0===r?void 0:null===(s=r.data)||void 0===s?void 0:s.items)}catch(e){console.error("fetch user list failed:",e)}},fetchGroupList=async(e,t)=>{try{var a;let n=await (0,f.B)({page:e,limit:t});d(null==n?void 0:null===(a=n.data)||void 0===a?void 0:a.data)}catch(e){console.error("fetch group list failed:",e)}},fetchTeamList=async(e,t)=>{try{var a,n;let i=await (0,v.CB)({page:e,limit:t});_(null==i?void 0:null===(n=i.data)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.items)}catch(e){console.error("fetch team list failed:",e)}},handleCreateUser=async e=>{var t,a,n,i,s;try{let a=await (0,g.F8)(e);(null==a?void 0:a.status)===200&&(w.Am.success("Create a new user successfully!"),fetchUserList(1,N.pageSize),null===(t=S.current)||void 0===t||t.resetFields(),k(!1))}catch(e){console.error("An error occurred:",null==e?void 0:null===(n=e.response)||void 0===n?void 0:null===(a=n.data)||void 0===a?void 0:a.message),w.Am.error(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(i=s.data)||void 0===i?void 0:i.message)}};(0,s.useEffect)(()=>{fetchUserList(N.page,N.pageSize)},[N.page]),(0,s.useEffect)(()=>{fetchGroupList(1,100),fetchTeamList(1,100)},[]);let{getPrefixCls:R}=(0,s.useContext)(p.default.ConfigContext),B=R();return(0,b.iv)(_templateObject(),B,B),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{className:"techwave_fn_community_page",children:[(0,i.jsx)("div",{className:"fn__title_holder",children:(0,i.jsx)("div",{className:"container-fluid",children:(0,i.jsx)("h1",{className:"title",children:"User Management"})})}),(0,i.jsx)("div",{className:"techwave_fn_feed",children:(0,i.jsxs)("div",{className:"container-fluid",children:[(0,i.jsx)("div",{className:"w-100 d-flex justify-content-end",children:(0,i.jsx)(m(),{type:"primary",size:"large",icon:(0,i.jsx)(x.Z,{}),className:"d-flex align-items-center bg-success",onClick:()=>{k(!0)},children:"Create a new user"})}),(0,i.jsx)(o.Z,{columns:A,dataSource:t,pagination:!1,className:"mt-2"}),(0,i.jsx)(r.Z,{children:(0,i.jsx)(l.Z,{xs:24,children:(0,i.jsx)("div",{className:"user-card-pagination text-end mt-5",children:(0,i.jsx)(u.default,{align:"end",total:null==N?void 0:null===(e=N.meta)||void 0===e?void 0:e.total,onChange:e=>{T(t=>({...t,page:e}))},current:N.page,pageSize:N.pageSize})})})})]})})]}),(0,i.jsxs)(j.Y,{title:"Create a new user",open:Z,onFinish:handleCreateUser,onOpenChange:k,submitter:{searchConfig:{submitText:"Submit",resetText:"Close"}},validateMessages:{required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},formRef:S,children:[(0,i.jsxs)(C.A.Group,{children:[(0,i.jsx)(y.Z,{width:"md",name:"username",label:"Username",tooltip:"Enter a username",placeholder:"Enter username",rules:[{required:!0}]}),(0,i.jsx)(y.Z,{type:"email",width:"md",name:"email",label:"Email",tooltip:"Enter a email",placeholder:"Enter a email",rules:[{required:!0},{type:"email"}]})]}),(0,i.jsxs)(C.A.Group,{children:[(0,i.jsx)(y.Z,{width:"sm",name:"name",label:"Name",tooltip:"Enter a name",placeholder:"Enter a name",rules:[{required:!0}]}),(0,i.jsx)(E.Z,{options:n.map(e=>({value:e.id,label:e.name})),width:"sm",placeholder:"...",name:"group_id",label:"Choose a group",rules:[{required:!0}]}),(0,i.jsx)(E.Z,{width:"sm",placeholder:"...",options:c.map(e=>({value:e.id,label:e.name})),fieldProps:{mode:"multiple"},name:"team_ids",label:"Choose teams"})]})]})]})}},86449:function(e,t,a){"use strict";var n=a(57437),i=a(39272),s=a(24033),r=a(2265);t.Z=e=>t=>{let{authToken:a,login:l}=(0,i.useAuth)(),o=(0,s.useRouter)();return(0,r.useEffect)(()=>{a||o.push("/sign-in")},[a,o]),a?(0,n.jsx)(e,{...t}):null}}},function(e){e.O(0,[5713,8326,2600,1360,7394,7752,2627,2193,8939,5599,9404,9260,9272,6567,2971,2472,1744],function(){return e(e.s=59987)}),_N_E=e.O()}]);