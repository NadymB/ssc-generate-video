(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3882],{80967:function(e,s,n){"use strict";var r=n(13428),h=n(12258),p=n(2265),f=n(50291),v=n(84294),m=n(48660),w=p.forwardRef(function(e,s){var n=e.classes,m=e.className,w=e.raised,y=(0,h.Z)(e,["classes","className","raised"]);return p.createElement(v.Z,(0,r.Z)({className:(0,f.Z)(n.root,m),elevation:void 0!==w&&w?8:1,ref:s},y))});s.Z=(0,m.Z)({root:{overflow:"hidden"}},{name:"MuiCard"})(w)},93681:function(e,s,n){"use strict";var r=n(12258),h=n(13428),p=n(2265),f=n(50291),v=n(48660),m=[0,1,2,3,4,5,6,7,8,9,10],w=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12];function getOffset(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=parseFloat(e);return"".concat(n/s).concat(String(e).replace(String(n),"")||"px")}var y=p.forwardRef(function(e,s){var n=e.alignContent,v=void 0===n?"stretch":n,m=e.alignItems,w=void 0===m?"stretch":m,y=e.classes,x=e.className,C=e.component,k=void 0===C?"div":C,P=e.container,E=e.direction,A=void 0===E?"row":E,S=e.item,R=e.justify,T=e.justifyContent,M=void 0===T?"flex-start":T,W=e.lg,D=void 0!==W&&W,I=e.md,B=void 0!==I&&I,O=e.sm,L=void 0!==O&&O,$=e.spacing,z=void 0===$?0:$,j=e.wrap,_=void 0===j?"wrap":j,N=e.xl,F=void 0!==N&&N,Z=e.xs,V=void 0!==Z&&Z,U=e.zeroMinWidth,H=(0,r.Z)(e,["alignContent","alignItems","classes","className","component","container","direction","item","justify","justifyContent","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),q=(0,f.Z)(y.root,x,void 0!==P&&P&&[y.container,0!==z&&y["spacing-xs-".concat(String(z))]],void 0!==S&&S&&y.item,void 0!==U&&U&&y.zeroMinWidth,"row"!==A&&y["direction-xs-".concat(String(A))],"wrap"!==_&&y["wrap-xs-".concat(String(_))],"stretch"!==w&&y["align-items-xs-".concat(String(w))],"stretch"!==v&&y["align-content-xs-".concat(String(v))],"flex-start"!==(R||M)&&y["justify-content-xs-".concat(String(R||M))],!1!==V&&y["grid-xs-".concat(String(V))],!1!==L&&y["grid-sm-".concat(String(L))],!1!==B&&y["grid-md-".concat(String(B))],!1!==D&&y["grid-lg-".concat(String(D))],!1!==F&&y["grid-xl-".concat(String(F))]);return p.createElement(k,(0,h.Z)({className:q,ref:s},H))}),x=(0,v.Z)(function(e){var s;return(0,h.Z)({root:{},container:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},item:{boxSizing:"border-box",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-content-xs-center":{justifyContent:"center"},"justify-content-xs-flex-end":{justifyContent:"flex-end"},"justify-content-xs-space-between":{justifyContent:"space-between"},"justify-content-xs-space-around":{justifyContent:"space-around"},"justify-content-xs-space-evenly":{justifyContent:"space-evenly"}},(s={},m.forEach(function(n){var r=e.spacing(n);0!==r&&(s["spacing-".concat("xs","-").concat(n)]={margin:"-".concat(getOffset(r,2)),width:"calc(100% + ".concat(getOffset(r),")"),"& > $item":{padding:getOffset(r,2)}})}),s),e.breakpoints.keys.reduce(function(s,n){var r;return r={},w.forEach(function(e){var s="grid-".concat(n,"-").concat(e);if(!0===e){r[s]={flexBasis:0,flexGrow:1,maxWidth:"100%"};return}if("auto"===e){r[s]={flexBasis:"auto",flexGrow:0,maxWidth:"none"};return}var h="".concat(Math.round(e/12*1e8)/1e6,"%");r[s]={flexBasis:h,flexGrow:0,maxWidth:h}}),"xs"===n?(0,h.Z)(s,r):s[e.breakpoints.up(n)]=r,s},{}))},{name:"MuiGrid"})(y);s.Z=x},24813:function(e,s,n){"use strict";var r=n(13428),h=n(23409),p=n(76219);s.Z=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,h.Z)(e,(0,r.Z)({defaultTheme:p.Z},s))}},60902:function(e,s,n){"use strict";n.r(s),n.d(s,{capitalize:function(){return r.Z},createChainedFunction:function(){return h.Z},createSvgIcon:function(){return p.Z},debounce:function(){return f.Z},deprecatedPropType:function(){return deprecatedPropType},isMuiElement:function(){return v.Z},ownerDocument:function(){return m.Z},ownerWindow:function(){return w.Z},requirePropFactory:function(){return requirePropFactory},setRef:function(){return y.Z},unstable_useId:function(){return P.Z},unsupportedProp:function(){return unsupportedProp},useControlled:function(){return x.Z},useEventCallback:function(){return C.Z},useForkRef:function(){return k.Z},useIsFocusVisible:function(){return E.Z}});var r=n(50980),h=n(80558),p=n(16761),f=n(94605);function deprecatedPropType(e,s){return function(){return null}}var v=n(83226),m=n(94163),w=n(63488);function requirePropFactory(e){return function(){return null}}var y=n(45120);function unsupportedProp(e,s,n,r,h){return null}var x=n(91728),C=n(12089),k=n(77299),P=n(33555),E=n(75761)},54660:function(e,s,n){"use strict";var r=n(26314),h=n(36199);s.Z=void 0;var p=h(n(2265)),f=(0,r(n(48156)).default)(p.createElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"}),"Pause");s.Z=f},42020:function(e,s,n){"use strict";var r=n(26314),h=n(36199);s.Z=void 0;var p=h(n(2265)),f=(0,r(n(48156)).default)(p.createElement("path",{d:"M8 5v14l11-7z"}),"PlayArrow");s.Z=f},86793:function(e,s,n){"use strict";var r=n(26314),h=n(36199);s.Z=void 0;var p=h(n(2265)),f=(0,r(n(48156)).default)(p.createElement("path",{d:"M6 6h12v12H6z"}),"Stop");s.Z=f},48156:function(e,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return r.createSvgIcon}});var r=n(60902)},58005:function(e,s,n){"use strict";n.d(s,{ZP:function(){return l}});var r=n(2265),h=n(62601),o=function(){return(o=Object.assign||function(e){for(var s,n=1,r=arguments.length;n<r;n++)for(var h in s=arguments[n])Object.prototype.hasOwnProperty.call(s,h)&&(e[h]=s[h]);return e}).apply(this,arguments)};function a(e,s,n,r){return new(n||(n=Promise))(function(h,p){function u(e){try{i(r.next(e))}catch(e){p(e)}}function c(e){try{i(r.throw(e))}catch(e){p(e)}}function i(e){var s;e.done?h(e.value):((s=e.value)instanceof n?s:new n(function(e){e(s)})).then(u,c)}i((r=r.apply(e,s||[])).next())})}function u(e,s){var n,r,h,p,f={label:0,sent:function(){if(1&h[0])throw h[1];return h[1]},trys:[],ops:[]};return p={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(p[Symbol.iterator]=function(){return this}),p;function c(v){return function(m){return function(v){if(n)throw TypeError("Generator is already executing.");for(;p&&(p=0,v[0]&&(f=0)),f;)try{if(n=1,r&&(h=2&v[0]?r.return:v[0]?r.throw||((h=r.return)&&h.call(r),0):r.next)&&!(h=h.call(r,v[1])).done)return h;switch(r=0,h&&(v=[2&v[0],h.value]),v[0]){case 0:case 1:h=v;break;case 4:return f.label++,{value:v[1],done:!1};case 5:f.label++,r=v[1],v=[0];continue;case 7:v=f.ops.pop(),f.trys.pop();continue;default:if(!(h=(h=f.trys).length>0&&h[h.length-1])&&(6===v[0]||2===v[0])){f=0;continue}if(3===v[0]&&(!h||v[1]>h[0]&&v[1]<h[3])){f.label=v[1];break}if(6===v[0]&&f.label<h[1]){f.label=h[1],h=v;break}if(h&&f.label<h[2]){f.label=h[2],f.ops.push(v);break}h[2]&&f.ops.pop(),f.trys.pop();continue}v=s.call(e,f)}catch(e){v=[6,e],r=0}finally{n=h=0}if(5&v[0])throw v[1];return{value:v[0]?v[1]:void 0,done:!0}}([v,m])}}}var c=function(e){var s=e.setSize,n=e.setControllerCallback,r=e.setPercentageCallback,h=e.setErrorCallback;return function(e){if(!e.ok)throw Error("".concat(e.status," ").concat(e.type," ").concat(e.statusText));if(!e.body)throw Error("ReadableStream not yet supported in this browser.");var p=e.body,f=e.headers.get("content-encoding"),v=parseInt(e.headers.get(f?"x-file-size":"content-length")||"0",10);s(function(){return v});var m=0,w=new ReadableStream({start:function(e){n(e);var s=p.getReader();return function t(){return a(this,void 0,void 0,function(){return u(this,function(n){return[2,s.read().then(function(s){var n=s.done,h=s.value;return n?e.close():(m+=(null==h?void 0:h.byteLength)||0,h&&e.enqueue(h),r({loaded:m,total:v}),t())}).catch(function(n){return h(n),s.cancel("Cancelled"),e.error(n)})]})})}()}});return new Response(w)}},i=function(e,s,n){var r=new Blob([e],{type:n||"application/octet-stream"});if(void 0!==window.navigator.msSaveBlob)return window.navigator.msSaveBlob(r,s);var h=window.URL&&window.URL.createObjectURL?window.URL.createObjectURL(r):window.webkitURL.createObjectURL(r),p=document.createElement("a");return p.style.display="none",p.href=h,p.setAttribute("download",s),void 0===p.download&&p.setAttribute("target","_blank"),document.body.appendChild(p),p.click(),setTimeout(function(){document.body.removeChild(p),window.URL.revokeObjectURL(h)},200)};function l(e){var s,n=this;void 0===e&&(e={});var p=!1;try{p=!!h&&!!(null===(s=null==h?void 0:h.env)||void 0===s?void 0:s.REACT_APP_DEBUG_MODE)}catch(e){p=!1}var f=(0,r.useState)(0),v=f[0],m=f[1],w=(0,r.useState)(0),y=w[0],x=w[1],C=(0,r.useState)(0),k=C[0],P=C[1],E=(0,r.useState)(null),A=E[0],S=E[1],R=(0,r.useState)(!1),T=R[0],M=R[1],W=(0,r.useRef)(null),D=(0,r.useCallback)(function(e){var s=Math.round(e.loaded/e.total*100);x(function(){return s})},[]),I=(0,r.useCallback)(function(e){var s={"Failed to execute 'enqueue' on 'ReadableStreamDefaultController': Cannot enqueue a chunk into an errored readable stream":"Download canceled","The user aborted a request.":"Download timed out"};S(function(){return{errorMessage:s[e.message]?s[e.message]:e.message}})},[]),B=(0,r.useCallback)(function(e){W.current=e},[]),O=(0,r.useCallback)(function(){W.current&&W.current.error()},[]),L=(0,r.useCallback)(function(){B(null),m(function(){return 0}),x(function(){return 0}),P(function(){return 0}),M(function(){return!1})},[B]),$=(0,r.useCallback)(function(s,r,h,f){return void 0===h&&(h=0),void 0===f&&(f={}),a(n,void 0,void 0,function(){var n,v,w,y;return u(this,function(x){return T?[2,null]:(L(),S(function(){return null}),M(function(){return!0}),n=setInterval(function(){return m(function(e){return e+1})},p?1:1e3),v=c({setSize:P,setControllerCallback:B,setPercentageCallback:D,setErrorCallback:I}),w=new AbortController,y=setTimeout(function(){h>0&&w.abort()},h),[2,fetch(s,o(o(o({method:"GET"},e),f),{signal:w.signal})).then(v).then(function(e){return e.blob()}).then(function(e){return i(e,r)}).then(function(){return L(),clearInterval(n)}).catch(function(e){return L(),S(function(s){return"Failed to fetch"!==e.message?{errorMessage:e.message}:s}),clearTimeout(y),clearInterval(n)})])})})},[T,L,p,B,D,I,e]);return(0,r.useMemo)(function(){return{elapsed:v,percentage:y,size:k,download:$,cancel:O,error:A,isInProgress:T}},[v,y,k,$,O,A,T])}},51872:function(e,s,n){"use strict";n.d(s,{Z:function(){return esm_browser_v4}});for(var r,h={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)},p=new Uint8Array(16),f=[],v=0;v<256;++v)f.push((v+256).toString(16).slice(1));var esm_browser_v4=function(e,s,n){if(h.randomUUID&&!s&&!e)return h.randomUUID();var v=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(p)})();if(v[6]=15&v[6]|64,v[8]=63&v[8]|128,s){n=n||0;for(var m=0;m<16;++m)s[n+m]=v[m];return s}return function(e,s=0){return(f[e[s+0]]+f[e[s+1]]+f[e[s+2]]+f[e[s+3]]+"-"+f[e[s+4]]+f[e[s+5]]+"-"+f[e[s+6]]+f[e[s+7]]+"-"+f[e[s+8]]+f[e[s+9]]+"-"+f[e[s+10]]+f[e[s+11]]+f[e[s+12]]+f[e[s+13]]+f[e[s+14]]+f[e[s+15]]).toLowerCase()}(v)}},37132:function(e,s,n){"use strict";var r=Object.defineProperty,__defNormalProp=(e,s,n)=>s in e?r(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,__publicField=(e,s,n)=>(__defNormalProp(e,"symbol"!=typeof s?s+"":s,n),n);let getAudioData=e=>{window.AudioContext=window.AudioContext||window.webkitAudioContext;let s=new AudioContext;return fetch(e).then(e=>e.arrayBuffer()).then(e=>s.decodeAudioData(e)).catch(e=>{console.error(e)})},linearPath=(e,s)=>{let{channel:n=0,samples:r=e.length,height:h=100,width:p=800,top:f=0,left:v=0,type:m="steps",paths:w=[{d:"Q",sx:0,sy:0,x:50,y:100,ex:100,ey:0}],animation:y=!1,animationframes:x=10,normalize:C=!0}=s;var s=getFramesData(e,n,y,x),e=getFilterData(s,r),k=C?getNormalizeData(e):e;let P="";var E,A,S,R,T,M="bars"!=m?(h+2*f)/2:h+f,W=p/r,D=w.length,I="mirror"==m?2*D:D,B=k.length;for(let e=0;e<B;e++){0<e&&(R=P.length,T=P.charAt(R-1),P+=";"==T||0===R?" M 0 0 ;":";");let s=-9999,n=-9999;for(let p=0;p<r;p++){var O="bars"==m||p%2?1:-1;let r=1;for(let f=0;f<I;f++){let y=f;f>=D&&(y=f-D,r=-1),w[y].minshow=null!=(E=w[y].minshow)?E:0,w[y].maxshow=null!=(A=w[y].maxshow)?A:1,w[y].normalize=null!=(S=w[y].normalize)&&S;var L=w[y].normalize?1:k[e][p];if(w[y].minshow<=k[e][p]&&w[y].maxshow>=k[e][p])switch(w[y].d){case"L":var $=p*W+W*w[y].sx/100+v,z=M+-(L*w[y].sy/100*("bars"!=m?h/2:h)*O)*r,j=p*W+W*w[y].ex/100+v,_=M+-(L*w[y].ey/100*("bars"!=m?h/2:h)*O)*r;$===s&&z===n||(P+=`M ${$} ${z} `),P+=`L ${j} ${_} `,s=j,n=_;break;case"H":$=p*W+W*w[y].sx/100+v,z=M+-(L*w[y].y/100*("bars"!=m?h/2:h)*O)*r,j=p*W+W*w[y].ex/100+v,$===s&&z===n||(P+=`M ${$} ${z} `),P+=`H ${j} `,s=j,n=z;break;case"V":var _=p*W+W*w[y].x/100+v,N=M+-(L*w[y].sy/100*("bars"!=m?h/2:h)*O)*r,F=M+-(L*w[y].ey/100*("bars"!=m?h/2:h)*O)*r;_===s&&N===n||(P+=`M ${_} ${N} `),P+=`V ${F} `,s=_,n=F;break;case"C":var N=p*W+W*w[y].sx/100+v,F=M-M*w[y].sy/100*O,Z=p*W+W*w[y].x/100+v,V=M+-(L*w[y].y/100*("bars"!=m?h:2*h)*O)*r,U=p*W+W*w[y].ex/100+v,H=M-M*w[y].ey/100*O;N===s&&F===n||(P+=`M ${N} ${F} `),P+=`C ${N} ${F} ${Z} ${V} ${U} ${H} `,s=U,n=H;break;case"Q":var Z=p*W+W*w[y].sx/100+v,V=M+-(L*w[y].sy/100*("bars"!=m?h/2:h)*O)*r,U=p*W+W*w[y].x/100+v,H=M+-(L*w[y].y/100*("bars"!=m?h:2*h)*O)*r,q=p*W+W*w[y].ex/100+v,G=M+-(L*w[y].ey/100*("bars"!=m?h/2:h)*O)*r;Z===s&&V===n||(P+=`M ${Z} ${V} `),P+=`Q ${U} ${H} ${q} ${G} `,s=q,n=G;break;case"A":{var q=p*W+W*w[y].sx/100+v,G=M+-(L*w[y].sy/100*("bars"!=m?h/2:h)*O)*r,X=p*W+W*w[y].ex/100+v,Y=M+-(L*w[y].ey/100*("bars"!=m?h/2:h)*O)*r,J=(q===s&&G===n||(P+=`M ${q} ${G} `),w[y].rx*W/100),Q=w[y].ry*W/100;let e=w[y].sweep;-1==O&&(e=1==e?0:1),-1==r&&(e=1==e?0:1),P+=`A ${J} ${Q} ${w[y].angle} ${w[y].arc} ${e} ${X} ${Y} `,s=X,n=Y;break}case"Z":P+="Z "}}}}return P},getFramesData=(e,s,n,r)=>{let h=e.getChannelData(s),p=[];if(n){var f=e.sampleRate/r;for(let e=0;e<h.length;e+=f){var v=h.slice(e,e+f);p.push(v)}}else p.push(h);return p},getFilterData=(e,s)=>{let n=[];var r=e.length;for(let f=0;f<r;f++){var h=Math.floor(e[f].length/s);let r=[];for(let n=0;n<s;n++){var p=h*n;let s=0;for(let n=0;n<h;n++)s+=Math.abs(e[f][p+n]);r.push(s/h)}n.push(r)}return n},getNormalizeData=e=>{let s=[];var n=e.length;for(let h=0;h<n;h++){var r=Math.max(...e[h]);s.push(r)}let h=Math.pow(Math.max(...s),-1),p=[];for(let s=0;s<n;s++){var f=e[s].map(e=>e*h);p.push(f)}return p};let AudioPathPlayer=class AudioPathPlayer extends HTMLElement{constructor(){super(),__publicField(this,"loadSong",()=>{this.durationContainer.textContent=this.calculateTime(this.audio.duration),this.seekSlider.max=this.audio.duration,this.svg.unpauseAnimations(),this.animationsvg.setAttribute("dur",""+this.audio.duration+"s"),this.animation||this.animationsvgx.setAttribute("dur",""+this.audio.duration+"s"),this.svg.pauseAnimations(),this.svg.setCurrentTime(0)}),__publicField(this,"playPause",()=>{this.audio.paused?(this.audio.play(),this.svg.unpauseAnimations(),this.path2.style.display="block",this.playPathButton.setAttribute("d",this.pausePath),this.raf=requestAnimationFrame(this.whilePlaying)):(this.audio.pause(),this.svg.pauseAnimations(),this.playPathButton.setAttribute("d",this.playPath),cancelAnimationFrame(this.raf))}),__publicField(this,"sliderInput",()=>{this.path2.style.display="block",this.currentTimeContainer.textContent=this.calculateTime(this.seekSlider.value),this.svg.setCurrentTime(this.seekSlider.value),this.audio.paused||cancelAnimationFrame(this.raf)}),__publicField(this,"sliderChange",()=>{this.audio.currentTime=this.seekSlider.value,this.path2.style.display="block",this.svg.setCurrentTime(this.seekSlider.value),this.audio.paused||(this.raf=requestAnimationFrame(this.whilePlaying))}),__publicField(this,"onFinish",()=>{this.seekSlider.value=this.seekSlider.max,this.svg.setCurrentTime(this.audio.duration),this.svg.pauseAnimations(),this.playPathButton.setAttribute("d",this.playPath),cancelAnimationFrame(this.raf)}),__publicField(this,"whilePlaying",()=>{this.seekSlider.value=this.audio.currentTime,this.currentTimeContainer.textContent=this.calculateTime(this.seekSlider.value),this.svg.setCurrentTime(this.seekSlider.value),this.raf=requestAnimationFrame(this.whilePlaying)}),__publicField(this,"svgDraw",()=>{let e=linearPath(this.audioData,this.options);this.animation?this.animationsvg.setAttribute("values",e):(this.path1.setAttribute("d",e),this.path2.setAttribute("d",e)),this.svg.setCurrentTime(this.seekSlider.value)}),__publicField(this,"calculateTime",e=>{let s=Math.floor(e%60),n=s<10?`0${s}`:`${s}`;return`${Math.floor(e/60)}:${n}`}),this.shadowDOM=this.attachShadow({mode:"open"}),this.audioData=null,this.hasAttribute("wave-options")?(this.options=JSON.parse(this.attributes["wave-options"].value),this.options.width=parseInt(this.attributes["wave-width"].value),this.options.height=parseInt(this.attributes["wave-height"].value)):this.options={samples:40,type:"mirror",width:parseInt(this.attributes["wave-width"].value),height:parseInt(this.attributes["wave-height"].value),paths:[{d:"V",sy:0,x:50,ey:100}]},this.options.hasOwnProperty("animation")?this.animation=this.options.animation:this.animation=!1,this.playPath="M8.5 8.7c0-1.7 1.2-2.4 2.6-1.5l14.4 8.3c1.4.8 1.4 2.2 0 3l-14.4 8.3c-1.4.8-2.6.2-2.6-1.5V8.7z",this.pausePath="M9.2 25c0 .5.4 1 .9 1h3.6c.5 0 .9-.4.9-1V9c0-.5-.4-.9-.9-.9h-3.6c-.4-.1-.9.3-.9.9v16zm11-17c-.5 0-1 .4-1 .9V25c0 .5.4 1 1 1h3.6c.5 0 1-.4 1-1V9c0-.5-.4-.9-1-.9 0-.1-3.6-.1-3.6-.1z",this.playPathButton=null,this.svg=null,this.path1=null,this.path2=null,this.animationsvg=null,this.animationsvgx=null,this.audio=null,this.durationContainer=null,this.seekSlider=null,this.currentTimeContainer=null,this.playIconContainer=null,this.raf=null}initComponent(){this.playPathButton=this.shadowDOM.getElementById("playPathButton"),this.svg=this.shadowDOM.getElementById("svg"),this.path1=this.shadowDOM.getElementById("path1"),this.path2=this.shadowDOM.getElementById("path2"),this.animationsvg=this.shadowDOM.getElementById("animationsvg"),this.animationsvgx=this.shadowDOM.getElementById("animationsvgx"),this.audio=this.shadowDOM.querySelector("audio"),this.durationContainer=this.shadowDOM.getElementById("duration"),this.seekSlider=this.shadowDOM.getElementById("seek-slider"),this.currentTimeContainer=this.shadowDOM.getElementById("current-time"),this.playIconContainer=this.shadowDOM.getElementById("play"),this.svg.pauseAnimations(),this.audio.readyState>0?this.loadSong():this.audio.addEventListener("loadedmetadata",this.loadSong),this.audio.addEventListener("ended",this.onFinish),this.seekSlider.addEventListener("input",this.sliderInput),this.seekSlider.addEventListener("change",this.sliderChange),this.playIconContainer.addEventListener("click",this.playPause)}async audioPath(){this.audioData=await getAudioData(this.attributes.src.value),this.svgDraw()}mapComponentAttributes(){["src","wave-height","wave-width","color","wave-options","wave-color","wave-progress-color","wave-slider"].forEach(e=>{this.attributes[e]||(this.attributes[e]={value:null})})}connectedCallback(){this.mapComponentAttributes(),this.render(),this.initComponent(),this.audioPath()}render(){this.shadowDOM.innerHTML=`
            ${this.templateCss()}
            ${this.template()}
        `}template(){let e=`
        <div part="player" class="player">
            <button id="play" part="play">
                <svg viewBox="0 0 34 34" width="34" height="34" part="button">
                    <path id="playPathButton" d="M8.5 8.7c0-1.7 1.2-2.4 2.6-1.5l14.4 8.3c1.4.8 1.4 2.2 0 3l-14.4 8.3c-1.4.8-2.6.2-2.6-1.5V8.7z"></path>
                    <!--<path fill="currentColor" d="M9.2 25c0 .5.4 1 .9 1h3.6c.5 0 .9-.4.9-1V9c0-.5-.4-.9-.9-.9h-3.6c-.4-.1-.9.3-.9.9v16zm11-17c-.5 0-1 .4-1 .9V25c0 .5.4 1 1 1h3.6c.5 0 1-.4 1-1V9c0-.5-.4-.9-1-.9 0-.1-3.6-.1-3.6-.1z"></path>-->
                </svg>
            </button>
        <div id="current-time" part="currenttime">0:00</div>
        <div id="slider" part="slider">
            <svg id="svg" part="svg" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 ${this.attributes["wave-width"].value} ${this.attributes["wave-height"].value}" width="${this.attributes["wave-width"].value}" height="${this.attributes["wave-height"].value}">
        `;return this.animation?e+=`
            <path id="path1" part="path1"  stroke-width="2" style="display:none;"></path>
            <path id="path2" part="path2"  stroke-width="2" style="display:block;">
                <animate id="animationsvg" attributeName="d" dur="99999s" calcMode="linear" values="" fill="freeze"></animate>
            </path>
            `:e+=`
            <defs>
                <clipPath id="left-to-right-x">
                <rect x="-1" y="-100" width="${parseInt(this.attributes["wave-width"].value)+2}" height="${parseInt(this.attributes["wave-height"].value)+200}" >
                    <animate id="animationsvgx" attributeName="x" values="-1;${parseInt(this.attributes["wave-width"].value)+2}" dur="99999s" fill="freeze" />   
                </rect>
                </clipPath>
                <clipPath id="left-to-right">
                <rect x="-${parseInt(this.attributes["wave-width"].value)+2}" y="-100" width="${parseInt(this.attributes["wave-width"].value)+2}" height="${parseInt(this.attributes["wave-height"].value)+200}" >
                    <animate id="animationsvg" attributeName="x" values="-${parseInt(this.attributes["wave-width"].value)+2};-1" dur="99999s" fill="freeze" />   
                </rect>
                </clipPath>    
            </defs> 
            <path id="path1" part="path1"  stroke-width="2" d="" clip-path="url(#left-to-right-x)"></path>
            <path id="path2" part="path2"  stroke-width="2" d="" clip-path="url(#left-to-right)" style="display:none;"></path>`,e+=`
        </svg>
                <input type="range" part="input" id="seek-slider" max="100" value="0" step="any">
            </div>
            <div id="duration" part="duration">0:00</div>
        </div>
        <audio src="${this.attributes.src.value}"></audio>
        `}templateCss(){var e,s,n,r,h,p,f,v,m,w,y,x;return`
            <style>
            *, :after, :before { 
                box-sizing: border-box;
                margin: 0;
            }
            :host {
                display: flex;
               
            }
            .player {
                display: flex;
                justify-content: space-between;
                align-items: center;
            }
            #play {
                background: transparent;
                border: none;
                cursor:pointer;
                padding: 0 0 0 10px;
                margin: 0px;
                
            }
            #play svg {
                fill: ${null!=(s=null==(e=this.attributes.color)?void 0:e.value)?s:"#858a8d"};
                position:relative;
                transition: transform 0.3s;
                top: -0.5px;
            }
            #play svg:hover {
                transform: scale(1.2);
            }
            #play svg path {
                stroke-linecap: round;
                stroke-linejoin: round;
                transition: 0.2s;
            }
            #svg {
                margin: 0 10px;
                overflow: visible;
                stroke-width: 1px;
                fill: none;
            }
            #path1 {
                stroke: ${null!=(r=null==(n=this.attributes["wave-color"])?void 0:n.value)?r:"#dadcdd"}; 
                overflow: visible;
                stroke-linecap: round;
            }
            #path2 {
                stroke: ${null!=(p=null==(h=this.attributes["wave-progress-color"])?void 0:h.value)?p:"#858a8d"};
                overflow: visible;
                stroke-linecap: round;
            }
            #slider  {
                position:relative;
            }
            #duration, #current-time {
                position: relative;
                top:-1.1px;
                color: ${null!=(v=null==(f=this.attributes.color)?void 0:f.value)?v:"#858a8d"};
                margin: 0px 10px;
                font-size: 16px;
                font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
                min-width:32px;
            }
            #seek-slider {
                position: absolute;
                width: 100%;
                left: 0;
            }
            input[type=range] {
                -webkit-appearance: none; 
                width: 100%; 
                background: transparent; 
                padding: 0px;
                margin: 0px;
                border: 0px;
                height: ${parseInt(this.attributes["wave-height"].value)}px;
            }  
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
            }
            input[type=range]:focus {
                outline: none; 
            }
            
            input[type=range]::-ms-track {
                width: 100%;
                cursor: pointer;
                /* Hides the slider so custom styles can be added */
                background: transparent; 
                border-color: transparent;
                color: transparent;
            }
            input[type=range]::-webkit-slider-thumb {
                -webkit-appearance: none;
                position:relative; 
                /*top: -1.5px;*/
                height: 12.5px;
                width: 12.5px;
                border-radius: 50%;
                background:  ${null!=(w=null==(m=this.attributes["wave-slider"])?void 0:m.value)?w:"#4fc3f7"};
                cursor: pointer;
                box-shadow: none;
            }
            input[type="range"]::-webkit-slider-thumb {
                transition: transform 0.3s;
            }
            input[type="range"]:active::-webkit-slider-thumb {
                transform: scale(1.5);
            }
            input[type="range"]::-moz-range-thumb {
                height: 12.5px;
                width: 12.5px;
                border-radius: 50%;
                background:  ${null!=(x=null==(y=this.attributes["wave-slider"])?void 0:y.value)?x:"#4fc3f7"};
                cursor: pointer;
                box-shadow: none;
                border: 0px;
            }

            input[type="range"]:active::-moz-range-thumb {
                transform: scale(1.5);
            }  
            </style>
        `}};window.customElements.define("wave-audio-path-player",AudioPathPlayer)},40492:function(e,s){var n,r,h;r=this,h=function(){"use strict";var e,s={defaultParams:{audioContext:null,audioRate:1,autoCenter:!0,backend:"WebAudio",container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,progressColor:"#555",normalize:!1,renderer:"MultiCanvas",scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999"},init:function(e){if(this.params=s.util.extend({},this.defaultParams,e),this.container="string"==typeof e.container?document.querySelector(this.params.container):this.params.container,!this.container)throw Error("Container element not found");if(null==this.params.mediaContainer?this.mediaContainer=this.container:"string"==typeof this.params.mediaContainer?this.mediaContainer=document.querySelector(this.params.mediaContainer):this.mediaContainer=this.params.mediaContainer,!this.mediaContainer)throw Error("Media Container element not found");this.savedVolume=0,this.isMuted=!1,this.tmpEvents=[],this.currentAjax=null,this.createDrawer(),this.createBackend(),this.createPeakCache(),this.isDestroyed=!1},createDrawer:function(){var e=this;this.drawer=Object.create(s.Drawer[this.params.renderer]),this.drawer.init(this.container,this.params),this.drawer.on("redraw",function(){e.drawBuffer(),e.drawer.progress(e.backend.getPlayedPercents())}),this.drawer.on("click",function(s,n){setTimeout(function(){e.seekTo(n)},0)}),this.drawer.on("scroll",function(s){e.params.partialRender&&e.drawBuffer(),e.fireEvent("scroll",s)})},createBackend:function(){var e=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||s.WebAudio.supportsWebAudio()||(this.params.backend="MediaElement"),this.backend=Object.create(s[this.params.backend]),this.backend.init(this.params),this.backend.on("finish",function(){e.fireEvent("finish")}),this.backend.on("play",function(){e.fireEvent("play")}),this.backend.on("pause",function(){e.fireEvent("pause")}),this.backend.on("audioprocess",function(s){e.drawer.progress(e.backend.getPlayedPercents()),e.fireEvent("audioprocess",s)})},createPeakCache:function(){this.params.partialRender&&(this.peakCache=Object.create(s.PeakCache),this.peakCache.init())},getDuration:function(){return this.backend.getDuration()},getCurrentTime:function(){return this.backend.getCurrentTime()},play:function(e,s){this.fireEvent("interaction",this.play.bind(this,e,s)),this.backend.play(e,s)},pause:function(){this.backend.isPaused()||this.backend.pause()},playPause:function(){this.backend.isPaused()?this.play():this.pause()},isPlaying:function(){return!this.backend.isPaused()},skipBackward:function(e){this.skip(-e||-this.params.skipLength)},skipForward:function(e){this.skip(e||this.params.skipLength)},skip:function(e){var s=this.getCurrentTime()||0,n=this.getDuration()||1;s=Math.max(0,Math.min(n,s+(e||0))),this.seekAndCenter(s/n)},seekAndCenter:function(e){this.seekTo(e),this.drawer.recenter(e)},seekTo:function(e){this.fireEvent("interaction",this.seekTo.bind(this,e));var s=this.backend.isPaused();s||this.backend.pause();var n=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(e*this.getDuration()),this.drawer.progress(this.backend.getPlayedPercents()),s||this.backend.play(),this.params.scrollParent=n,this.fireEvent("seek",e)},stop:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)},setVolume:function(e){this.backend.setVolume(e)},getVolume:function(){return this.backend.getVolume()},setPlaybackRate:function(e){this.backend.setPlaybackRate(e)},getPlaybackRate:function(){return this.backend.getPlaybackRate()},toggleMute:function(){this.setMute(!this.isMuted)},setMute:function(e){e!==this.isMuted&&(e?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0):(this.backend.setVolume(this.savedVolume),this.isMuted=!1))},getMute:function(){return this.isMuted},getFilters:function(){return this.backend.filters||[]},toggleScroll:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()},toggleInteraction:function(){this.params.interact=!this.params.interact},drawBuffer:function(){var e=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),s=this.drawer.getWidth(),n=e,r=this.drawer.getScrollX(),h=Math.min(r+s,n);if(this.params.fillParent&&(!this.params.scrollParent||e<s)&&(r=0,h=n=s),this.params.partialRender)for(var p=this.peakCache.addRangeToPeakCache(n,r,h),f=0;f<p.length;f++){var v=this.backend.getPeaks(n,p[f][0],p[f][1]);this.drawer.drawPeaks(v,n,p[f][0],p[f][1])}else{r=0,h=n;var v=this.backend.getPeaks(n,r,h);this.drawer.drawPeaks(v,n,r,h)}this.fireEvent("redraw",v,n)},zoom:function(e){this.params.minPxPerSec=e,this.params.scrollParent=!0,this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",e)},loadArrayBuffer:function(e){this.decodeArrayBuffer(e,(function(e){this.isDestroyed||this.loadDecodedBuffer(e)}).bind(this))},loadDecodedBuffer:function(e){this.backend.load(e),this.drawBuffer(),this.fireEvent("ready")},loadBlob:function(e){var s=this,n=new FileReader;n.addEventListener("progress",function(e){s.onProgress(e)}),n.addEventListener("load",function(e){s.loadArrayBuffer(e.target.result)}),n.addEventListener("error",function(){s.fireEvent("error","Error reading file")}),n.readAsArrayBuffer(e),this.empty()},load:function(e,s,n){switch(this.empty(),this.params.backend){case"WebAudio":return this.loadBuffer(e,s);case"MediaElement":return this.loadMediaElement(e,s,n)}},loadBuffer:function(e,s){var n=(function(s){return s&&this.tmpEvents.push(this.once("ready",s)),this.getArrayBuffer(e,this.loadArrayBuffer.bind(this))}).bind(this);return s?(this.backend.setPeaks(s),this.drawBuffer(),void this.tmpEvents.push(this.once("interaction",n))):n()},loadMediaElement:function(e,s,n){var r=e;"string"==typeof e?this.backend.load(r,this.mediaContainer,s,n):(this.backend.loadElt(e,s),r=e.src),this.tmpEvents.push(this.backend.once("canplay",(function(){this.drawBuffer(),this.fireEvent("ready")}).bind(this)),this.backend.once("error",(function(e){this.fireEvent("error",e)}).bind(this))),s&&this.backend.setPeaks(s),(!s||this.params.forceDecode)&&this.backend.supportsWebAudio()&&this.getArrayBuffer(r,(function(e){this.decodeArrayBuffer(e,(function(e){this.backend.buffer=e,this.backend.setPeaks(null),this.drawBuffer(),this.fireEvent("waveform-ready")}).bind(this))}).bind(this))},decodeArrayBuffer:function(e,s){this.arraybuffer=e,this.backend.decodeArrayBuffer(e,(function(n){this.isDestroyed||this.arraybuffer!=e||(s(n),this.arraybuffer=null)}).bind(this),this.fireEvent.bind(this,"error","Error decoding audiobuffer"))},getArrayBuffer:function(e,n){var r=this,h=s.util.ajax({url:e,responseType:"arraybuffer"});return this.currentAjax=h,this.tmpEvents.push(h.on("progress",function(e){r.onProgress(e)}),h.on("success",function(e,s){n(e),r.currentAjax=null}),h.on("error",function(e){r.fireEvent("error","XHR error: "+e.target.statusText),r.currentAjax=null})),h},onProgress:function(e){if(e.lengthComputable)var s=e.loaded/e.total;else s=e.loaded/(e.loaded+1e6);this.fireEvent("loading",Math.round(100*s),e.target)},exportPCM:function(e,s,n){e=e||1024,s=s||1e4,n=n||!1;var r=this.backend.getPeaks(e,s),h=JSON.stringify([].map.call(r,function(e){return Math.round(e*s)/s}));return n||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(h)),h},exportImage:function(e,s){return e||(e="image/png"),s||(s=1),this.drawer.getImage(e,s)},cancelAjax:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)},clearTmpEvents:function(){this.tmpEvents.forEach(function(e){e.un()})},empty:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)},destroy:function(){this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0}};return s.create=function(e){var n=Object.create(s);return n.init(e),n},s.util={extend:function(e){var s=Array.prototype.slice.call(arguments,1);return s.forEach(function(s){Object.keys(s).forEach(function(n){e[n]=s[n]})}),e},debounce:function(e,s,n){var r,h,p,g=function(){p=null,n||e.apply(h,r)};return function(){h=this,r=arguments;var f=n&&!p;clearTimeout(p),(p=setTimeout(g,s))||(p=setTimeout(g,s)),f&&e.apply(h,r)}},min:function(e){var s=+(1/0);for(var n in e)e[n]<s&&(s=e[n]);return s},max:function(e){var s=-1/0;for(var n in e)e[n]>s&&(s=e[n]);return s},getId:function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},ajax:function(e){var n=Object.create(s.Observer),r=new XMLHttpRequest,h=!1;return r.open(e.method||"GET",e.url,!0),r.responseType=e.responseType||"json",r.addEventListener("progress",function(e){n.fireEvent("progress",e),e.lengthComputable&&e.loaded==e.total&&(h=!0)}),r.addEventListener("load",function(e){h||n.fireEvent("progress",e),n.fireEvent("load",e),200==r.status||206==r.status?n.fireEvent("success",r.response,e):n.fireEvent("error",e)}),r.addEventListener("error",function(e){n.fireEvent("error",e)}),r.send(),n.xhr=r,n}},s.Observer={on:function(e,s){this.handlers||(this.handlers={});var n=this.handlers[e];return n||(n=this.handlers[e]=[]),n.push(s),{name:e,callback:s,un:this.un.bind(this,e,s)}},un:function(e,s){if(this.handlers){var n=this.handlers[e];if(n){if(s)for(var r=n.length-1;r>=0;r--)n[r]==s&&n.splice(r,1);else n.length=0}}},unAll:function(){this.handlers=null},once:function(e,s){var n=this,d=function(){s.apply(this,arguments),setTimeout(function(){n.un(e,d)},0)};return this.on(e,d)},fireEvent:function(e){if(this.handlers){var s=this.handlers[e],n=Array.prototype.slice.call(arguments,1);s&&s.forEach(function(e){e.apply(null,n)})}}},s.util.extend(s,s.Observer),s.WebAudio={scriptBufferSize:256,PLAYING_STATE:0,PAUSED_STATE:1,FINISHED_STATE:2,supportsWebAudio:function(){return!(!window.AudioContext&&!window.webkitAudioContext)},getAudioContext:function(){return this.ac||(this.ac=new(window.AudioContext||window.webkitAudioContext)),this.ac},getOfflineAudioContext:function(e){return s.WebAudio.offlineAudioContext||(s.WebAudio.offlineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,e)),s.WebAudio.offlineAudioContext},init:function(e){this.params=e,this.ac=e.audioContext||this.getAudioContext(),this.lastPlay=this.ac.currentTime,this.startPosition=0,this.scheduledPause=null,this.states=[Object.create(s.WebAudio.state.playing),Object.create(s.WebAudio.state.paused),Object.create(s.WebAudio.state.finished)],this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(this.PAUSED_STATE),this.setPlaybackRate(this.params.audioRate),this.setLength(0)},disconnectFilters:function(){this.filters&&(this.filters.forEach(function(e){e&&e.disconnect()}),this.filters=null,this.analyser.connect(this.gainNode))},setState:function(e){this.state!==this.states[e]&&(this.state=this.states[e],this.state.init.call(this))},setFilter:function(){this.setFilters([].slice.call(arguments))},setFilters:function(e){this.disconnectFilters(),e&&e.length&&(this.filters=e,this.analyser.disconnect(),e.reduce(function(e,s){return e.connect(s),s},this.analyser).connect(this.gainNode))},createScriptNode:function(){this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(this.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(this.scriptBufferSize),this.scriptNode.connect(this.ac.destination)},addOnAudioProcess:function(){var e=this;this.scriptNode.onaudioprocess=function(){var s=e.getCurrentTime();s>=e.getDuration()?(e.setState(e.FINISHED_STATE),e.fireEvent("pause")):s>=e.scheduledPause?e.pause():e.state===e.states[e.PLAYING_STATE]&&e.fireEvent("audioprocess",s)}},removeOnAudioProcess:function(){this.scriptNode.onaudioprocess=null},createAnalyserNode:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)},createVolumeNode:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)},setVolume:function(e){this.gainNode.gain.value=e},getVolume:function(){return this.gainNode.gain.value},decodeArrayBuffer:function(e,s,n){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(e,(function(e){s(e)}).bind(this),n)},setPeaks:function(e){this.peaks=e},setLength:function(e){if(!this.mergedPeaks||e!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];for(var s=this.buffer?this.buffer.numberOfChannels:1,n=0;n<s;n++)this.splitPeaks[n]=[],this.splitPeaks[n][2*(e-1)]=0,this.splitPeaks[n][2*(e-1)+1]=0;this.mergedPeaks[2*(e-1)]=0,this.mergedPeaks[2*(e-1)+1]=0}},getPeaks:function(e,s,n){if(this.peaks)return this.peaks;this.setLength(e);for(var r=this.buffer.length/e,h=~~(r/10)||1,p=this.buffer.numberOfChannels,f=0;f<p;f++)for(var v=this.splitPeaks[f],m=this.buffer.getChannelData(f),w=s;w<=n;w++){for(var y=~~(w*r),x=~~(y+r),C=0,k=0,P=y;P<x;P+=h){var E=m[P];E>k&&(k=E),E<C&&(C=E)}v[2*w]=k,v[2*w+1]=C,(0==f||k>this.mergedPeaks[2*w])&&(this.mergedPeaks[2*w]=k),(0==f||C<this.mergedPeaks[2*w+1])&&(this.mergedPeaks[2*w+1]=C)}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks},getPlayedPercents:function(){return this.state.getPlayedPercents.call(this)},disconnectSource:function(){this.source&&this.source.disconnect()},destroy:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.audioContext||"function"==typeof this.ac.close&&this.ac.close()},load:function(e){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=e,this.createSource()},createSource:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.value=this.playbackRate,this.source.buffer=this.buffer,this.source.connect(this.analyser)},isPaused:function(){return this.state!==this.states[this.PLAYING_STATE]},getDuration:function(){return this.buffer?this.buffer.duration:0},seekTo:function(e,s){if(this.buffer)return this.scheduledPause=null,null==e&&(e=this.getCurrentTime())>=this.getDuration()&&(e=0),null==s&&(s=this.getDuration()),this.startPosition=e,this.lastPlay=this.ac.currentTime,this.state===this.states[this.FINISHED_STATE]&&this.setState(this.PAUSED_STATE),{start:e,end:s}},getPlayedTime:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate},play:function(e,s){if(this.buffer){this.createSource();var n=this.seekTo(e,s);e=n.start,s=n.end,this.scheduledPause=s,this.source.start(0,e,s-e),"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume(),this.setState(this.PLAYING_STATE),this.fireEvent("play")}},pause:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(this.PAUSED_STATE),this.fireEvent("pause")},getCurrentTime:function(){return this.state.getCurrentTime.call(this)},getPlaybackRate:function(){return this.playbackRate},setPlaybackRate:function(e){e=e||1,this.isPaused()?this.playbackRate=e:(this.pause(),this.playbackRate=e,this.play())}},s.WebAudio.state={},s.WebAudio.state.playing={init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}},s.WebAudio.state.paused={init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var e=this.getDuration();return this.getCurrentTime()/e||0},getCurrentTime:function(){return this.startPosition}},s.WebAudio.state.finished={init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}},s.util.extend(s.WebAudio,s.Observer),s.MediaElement=Object.create(s.WebAudio),s.util.extend(s.MediaElement,{init:function(e){this.params=e,this.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){}},this.mediaType=e.mediaType.toLowerCase(),this.elementPosition=e.elementPosition,this.setPlaybackRate(this.params.audioRate),this.createTimer()},createTimer:function(){var e=this,b=function(){e.isPaused()||(e.fireEvent("audioprocess",e.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(b))};this.on("play",b)},load:function(e,s,n,r){var h=document.createElement(this.mediaType);h.controls=this.params.mediaControls,h.autoplay=this.params.autoplay||!1,h.preload=null==r?"auto":r,h.src=e,h.style.width="100%";var p=s.querySelector(this.mediaType);p&&s.removeChild(p),s.appendChild(h),this._load(h,n)},loadElt:function(e,s){e.controls=this.params.mediaControls,e.autoplay=this.params.autoplay||!1,this._load(e,s)},_load:function(e,s){var n=this;"function"==typeof e.load&&e.load(),e.addEventListener("error",function(){n.fireEvent("error","Error loading media element")}),e.addEventListener("canplay",function(){n.fireEvent("canplay")}),e.addEventListener("ended",function(){n.fireEvent("finish")}),this.media=e,this.peaks=s,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate)},isPaused:function(){return!this.media||this.media.paused},getDuration:function(){var e=(this.buffer||this.media).duration;return e>=1/0&&(e=this.media.seekable.end(0)),e},getCurrentTime:function(){return this.media&&this.media.currentTime},getPlayedPercents:function(){return this.getCurrentTime()/this.getDuration()||0},setPlaybackRate:function(e){this.playbackRate=e||1,this.media.playbackRate=this.playbackRate},seekTo:function(e){null!=e&&(this.media.currentTime=e),this.clearPlayEnd()},play:function(e,s){this.seekTo(e),this.media.play(),s&&this.setPlayEnd(s),this.fireEvent("play")},pause:function(){this.media&&this.media.pause(),this.clearPlayEnd(),this.fireEvent("pause")},setPlayEnd:function(e){var s=this;this.onPlayEnd=function(n){n>=e&&(s.pause(),s.seekTo(e))},this.on("audioprocess",this.onPlayEnd)},clearPlayEnd:function(){this.onPlayEnd&&(this.un("audioprocess",this.onPlayEnd),this.onPlayEnd=null)},getPeaks:function(e,n,r){return this.buffer?s.WebAudio.getPeaks.call(this,e,n,r):this.peaks||[]},getVolume:function(){return this.media.volume},setVolume:function(e){this.media.volume=e},destroy:function(){this.pause(),this.unAll(),this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}),s.AudioElement=s.MediaElement,s.Drawer={init:function(e,s){this.container=e,this.params=s,this.width=0,this.height=s.height*this.params.pixelRatio,this.lastPos=0,this.initDrawer(s),this.createWrapper(),this.createElements()},createWrapper:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()},handleEvent:function(e,s){s||e.preventDefault();var n,r=e.targetTouches?e.targetTouches[0].clientX:e.clientX,h=this.wrapper.getBoundingClientRect(),p=this.width,f=this.getWidth();return!this.params.fillParent&&p<f?(n=(r-h.left)*this.params.pixelRatio/p||0)>1&&(n=1):n=(r-h.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,n},setupWrapperEvents:function(){var e=this;this.wrapper.addEventListener("click",function(s){var n=e.wrapper.offsetHeight-e.wrapper.clientHeight;if(0!=n){var r=e.wrapper.getBoundingClientRect();if(s.clientY>=r.bottom-n)return}e.params.interact&&e.fireEvent("click",s,e.handleEvent(s))}),this.wrapper.addEventListener("scroll",function(s){e.fireEvent("scroll",s)})},drawPeaks:function(e,s,n,r){this.setWidth(s),this.params.barWidth?this.drawBars(e,0,n,r):this.drawWave(e,0,n,r)},style:function(e,s){return Object.keys(s).forEach(function(n){e.style[n]!==s[n]&&(e.style[n]=s[n])}),e},resetScroll:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)},recenter:function(e){var s=this.wrapper.scrollWidth*e;this.recenterOnPosition(s,!0)},recenterOnPosition:function(e,s){var n=this.wrapper.scrollLeft,r=~~(this.wrapper.clientWidth/2),h=e-r,p=h-n,f=this.wrapper.scrollWidth-this.wrapper.clientWidth;0!=f&&(!s&&-r<=p&&p<r&&(h=n+(p=Math.max(-5,Math.min(5,p)))),(h=Math.max(0,Math.min(f,h)))!=n&&(this.wrapper.scrollLeft=h))},getScrollX:function(){return Math.round(this.wrapper.scrollLeft*this.params.pixelRatio)},getWidth:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)},setWidth:function(e){this.width!=e&&(this.width=e,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize())},setHeight:function(e){e!=this.height&&(this.height=e,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize())},progress:function(e){var s=1/this.params.pixelRatio,n=Math.round(e*this.width)*s;if(n<this.lastPos||n-this.lastPos>=s){if(this.lastPos=n,this.params.scrollParent&&this.params.autoCenter){var r=~~(this.wrapper.scrollWidth*e);this.recenterOnPosition(r)}this.updateProgress(n)}},destroy:function(){this.unAll(),this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=null)},initDrawer:function(){},createElements:function(){},updateSize:function(){},drawWave:function(e,s){},clearWave:function(){},updateProgress:function(e){}},s.util.extend(s.Drawer,s.Observer),s.Drawer.Canvas=Object.create(s.Drawer),s.util.extend(s.Drawer.Canvas,{createElements:function(){var e=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:0,top:0,bottom:0}));if(this.waveCc=e.getContext("2d"),this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.params.waveColor!=this.params.progressColor){var s=this.progressWave.appendChild(document.createElement("canvas"));this.progressCc=s.getContext("2d")}},updateSize:function(){var e=Math.round(this.width/this.params.pixelRatio);this.waveCc.canvas.width=this.width,this.waveCc.canvas.height=this.height,this.style(this.waveCc.canvas,{width:e+"px"}),this.style(this.progressWave,{display:"block"}),this.progressCc&&(this.progressCc.canvas.width=this.width,this.progressCc.canvas.height=this.height,this.style(this.progressCc.canvas,{width:e+"px"})),this.clearWave()},clearWave:function(){this.waveCc.clearRect(0,0,this.width,this.height),this.progressCc&&this.progressCc.clearRect(0,0,this.width,this.height)},drawBars:function(e,n,r,h){var p=this;if(e[0]instanceof Array){var f=e;if(this.params.splitChannels)return this.setHeight(f.length*this.params.height*this.params.pixelRatio),void f.forEach(function(e,s){p.drawBars(e,s,r,h)});e=f[0]}var v=[].some.call(e,function(e){return e<0}),m=1;v&&(m=2);var w=.5/this.params.pixelRatio,y=this.width,x=this.params.height*this.params.pixelRatio,C=x*n||0,k=x/2,P=e.length/m,E=this.params.barWidth*this.params.pixelRatio,A=Math.max(this.params.pixelRatio,~~(E/2)),S=E+A,R=1;if(this.params.normalize){var T=s.util.max(e),M=s.util.min(e);R=-M>T?-M:T}var W=P/y;this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(s){if(s)for(var n=r/W;n<h/W;n+=S){var p=Math.round((e[Math.floor(n*W*m)]||0)/R*k);s.fillRect(n+w,k-p+C,E+w,2*p)}},this)},drawWave:function(e,n,r,h){var p=this;if(e[0]instanceof Array){var f=e;if(this.params.splitChannels)return this.setHeight(f.length*this.params.height*this.params.pixelRatio),void f.forEach(function(e,s){p.drawWave(e,s,r,h)});e=f[0]}if(![].some.call(e,function(e){return e<0})){for(var v=[],m=0,w=e.length;m<w;m++)v[2*m]=e[m],v[2*m+1]=-e[m];e=v}var y=.5/this.params.pixelRatio,x=this.params.height*this.params.pixelRatio,C=x*n||0,k=x/2,P=~~(e.length/2),E=1;this.params.fillParent&&this.width!=P&&(E=this.width/P);var A=1;if(this.params.normalize){var S=s.util.max(e),R=s.util.min(e);A=-R>S?-R:S}this.waveCc.fillStyle=this.params.waveColor,this.progressCc&&(this.progressCc.fillStyle=this.params.progressColor),[this.waveCc,this.progressCc].forEach(function(s){if(s){s.beginPath(),s.moveTo(r*E+y,k+C);for(var n=r;n<h;n++){var p=Math.round(e[2*n]/A*k);s.lineTo(n*E+y,k-p+C)}for(var n=h-1;n>=r;n--){var p=Math.round(e[2*n+1]/A*k);s.lineTo(n*E+y,k-p+C)}s.closePath(),s.fill(),s.fillRect(0,k+C-y,this.width,y)}},this)},updateProgress:function(e){this.style(this.progressWave,{width:e+"px"})},getImage:function(e,s){return this.waveCc.canvas.toDataURL(e,s)}}),s.Drawer.MultiCanvas=Object.create(s.Drawer),s.util.extend(s.Drawer.MultiCanvas,{initDrawer:function(e){if(this.maxCanvasWidth=null!=e.maxCanvasWidth?e.maxCanvasWidth:4e3,this.maxCanvasElementWidth=Math.round(this.maxCanvasWidth/this.params.pixelRatio),this.maxCanvasWidth<=1)throw"maxCanvasWidth must be greater than 1.";if(this.maxCanvasWidth%2==1)throw"maxCanvasWidth must be an even number.";this.hasProgressCanvas=this.params.waveColor!=this.params.progressColor,this.halfPixel=.5/this.params.pixelRatio,this.canvases=[]},createElements:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:2,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})),this.addCanvas()},updateSize:function(){for(var e=Math.round(this.width/this.params.pixelRatio),s=Math.ceil(e/this.maxCanvasElementWidth);this.canvases.length<s;)this.addCanvas();for(;this.canvases.length>s;)this.removeCanvas();for(var n in this.canvases){var r=this.maxCanvasWidth+2*Math.ceil(this.params.pixelRatio/2);n==this.canvases.length-1&&(r=this.width-this.maxCanvasWidth*(this.canvases.length-1)),this.updateDimensions(this.canvases[n],r,this.height),this.clearWaveForEntry(this.canvases[n])}},addCanvas:function(){var e={},s=this.maxCanvasElementWidth*this.canvases.length;e.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:1,left:s+"px",top:0,bottom:0})),e.waveCtx=e.wave.getContext("2d"),this.hasProgressCanvas&&(e.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:s+"px",top:0,bottom:0})),e.progressCtx=e.progress.getContext("2d")),this.canvases.push(e)},removeCanvas:function(){var e=this.canvases.pop();e.wave.parentElement.removeChild(e.wave),this.hasProgressCanvas&&e.progress.parentElement.removeChild(e.progress)},updateDimensions:function(e,s,n){var r=Math.round(s/this.params.pixelRatio),h=Math.round(this.width/this.params.pixelRatio);e.start=e.waveCtx.canvas.offsetLeft/h||0,e.end=e.start+r/h,e.waveCtx.canvas.width=s,e.waveCtx.canvas.height=n,this.style(e.waveCtx.canvas,{width:r+"px"}),this.style(this.progressWave,{display:"block"}),this.hasProgressCanvas&&(e.progressCtx.canvas.width=s,e.progressCtx.canvas.height=n,this.style(e.progressCtx.canvas,{width:r+"px"}))},clearWave:function(){for(var e in this.canvases)this.clearWaveForEntry(this.canvases[e])},clearWaveForEntry:function(e){e.waveCtx.clearRect(0,0,e.waveCtx.canvas.width,e.waveCtx.canvas.height),this.hasProgressCanvas&&e.progressCtx.clearRect(0,0,e.progressCtx.canvas.width,e.progressCtx.canvas.height)},drawBars:function(e,n,r,h){var p=this;if(e[0]instanceof Array){var f=e;if(this.params.splitChannels)return this.setHeight(f.length*this.params.height*this.params.pixelRatio),void f.forEach(function(e,s){p.drawBars(e,s,r,h)});e=f[0]}var v=[].some.call(e,function(e){return e<0}),m=1;v&&(m=2);var w=this.width,y=this.params.height*this.params.pixelRatio,x=y*n||0,C=y/2,k=e.length/m,P=this.params.barWidth*this.params.pixelRatio,E=Math.max(this.params.pixelRatio,~~(P/2)),A=P+E,S=1;if(this.params.normalize){var R=s.util.max(e),T=s.util.min(e);S=-T>R?-T:R}for(var M=k/w,W=r/M;W<h/M;W+=A){var D=Math.round((e[Math.floor(W*M*m)]||0)/S*C);this.fillRect(W+this.halfPixel,C-D+x,P+this.halfPixel,2*D)}},drawWave:function(e,n,r,h){var p=this;if(e[0]instanceof Array){var f=e;if(this.params.splitChannels)return this.setHeight(f.length*this.params.height*this.params.pixelRatio),void f.forEach(function(e,s){p.drawWave(e,s,r,h)});e=f[0]}if(![].some.call(e,function(e){return e<0})){for(var v=[],m=0,w=e.length;m<w;m++)v[2*m]=e[m],v[2*m+1]=-e[m];e=v}var y=this.params.height*this.params.pixelRatio,x=y*n||0,C=y/2,k=1;if(this.params.normalize){var P=s.util.max(e),E=s.util.min(e);k=-E>P?-E:P}this.drawLine(e,k,C,x,r,h),this.fillRect(0,C+x-this.halfPixel,this.width,this.halfPixel)},drawLine:function(e,s,n,r,h,p){for(var f in this.canvases){var v=this.canvases[f];this.setFillStyles(v),this.drawLineToContext(v,v.waveCtx,e,s,n,r,h,p),this.drawLineToContext(v,v.progressCtx,e,s,n,r,h,p)}},drawLineToContext:function(e,s,n,r,h,p,f,v){if(s){var m=n.length/2,w=1;this.params.fillParent&&this.width!=m&&(w=this.width/m);var y=Math.round(m*e.start),x=Math.round(m*e.end);if(!(y>v||x<f)){var C=Math.max(y,f),k=Math.min(x,v);s.beginPath(),s.moveTo((C-y)*w+this.halfPixel,h+p);for(var P=C;P<k;P++){var E=n[2*P]||0,A=Math.round(E/r*h);s.lineTo((P-y)*w+this.halfPixel,h-A+p)}for(var P=k-1;P>=C;P--){var E=n[2*P+1]||0,A=Math.round(E/r*h);s.lineTo((P-y)*w+this.halfPixel,h-A+p)}s.closePath(),s.fill()}}},fillRect:function(e,s,n,r){for(var h=Math.floor(e/this.maxCanvasWidth),p=Math.min(Math.ceil((e+n)/this.maxCanvasWidth)+1,this.canvases.length),f=h;f<p;f++){var v=this.canvases[f],m=f*this.maxCanvasWidth,w={x1:Math.max(e,f*this.maxCanvasWidth),y1:s,x2:Math.min(e+n,f*this.maxCanvasWidth+v.waveCtx.canvas.width),y2:s+r};w.x1<w.x2&&(this.setFillStyles(v),this.fillRectToContext(v.waveCtx,w.x1-m,w.y1,w.x2-w.x1,w.y2-w.y1),this.fillRectToContext(v.progressCtx,w.x1-m,w.y1,w.x2-w.x1,w.y2-w.y1))}},fillRectToContext:function(e,s,n,r,h){e&&e.fillRect(s,n,r,h)},setFillStyles:function(e){e.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(e.progressCtx.fillStyle=this.params.progressColor)},updateProgress:function(e){this.style(this.progressWave,{width:e+"px"})}}),s.PeakCache={init:function(){this.clearPeakCache()},clearPeakCache:function(){this.peakCacheRanges=[],this.peakCacheLength=-1},addRangeToPeakCache:function(e,s,n){e!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=e);for(var r=[],h=0;h<this.peakCacheRanges.length&&this.peakCacheRanges[h]<s;)h++;for(h%2==0&&r.push(s);h<this.peakCacheRanges.length&&this.peakCacheRanges[h]<=n;)r.push(this.peakCacheRanges[h]),h++;h%2==0&&r.push(n),r=r.filter(function(e,s,n){return 0==s?e!=n[s+1]:s==n.length-1?e!=n[s-1]:e!=n[s-1]&&e!=n[s+1]}),this.peakCacheRanges=this.peakCacheRanges.concat(r),this.peakCacheRanges=this.peakCacheRanges.sort(function(e,s){return e-s}).filter(function(e,s,n){return 0==s?e!=n[s+1]:s==n.length-1?e!=n[s-1]:e!=n[s-1]&&e!=n[s+1]});var p=[];for(h=0;h<r.length;h+=2)p.push([r[h],r[h+1]]);return p},getCacheRanges:function(){for(var e=[],s=0;s<this.peakCacheRanges.length;s+=2)e.push([this.peakCacheRanges[s],this.peakCacheRanges[s+1]]);return e}},e=function(){var e=document.querySelectorAll("wavesurfer");Array.prototype.forEach.call(e,function(e){var n=s.util.extend({container:e,backend:"MediaElement",mediaControls:!0},e.dataset);e.style.display="block";var r=s.create(n);if(e.dataset.peaks)var h=JSON.parse(e.dataset.peaks);r.load(e.dataset.url,h)})},"complete"===document.readyState?e():window.addEventListener("load",e),s},void 0!==(n=(function(){return r.WaveSurfer=h()}).apply(s,[]))&&(e.exports=n)}}]);